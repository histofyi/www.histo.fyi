{% extends "base.html" %}

{% block main %}

<section class="vertical-spacing-top">
    <div class="grid-container">
        <div class="column-full-width">
            <div class="inner">
                <small><strong>{{structure.pdb_code|upper}}</strong></small>
                <h1 class="heading-large vertical-spacing-bottom">{{structure.allele.mhc_alpha}} binding {{structure.peptide.sequence}} at {{structure.resolution}}&#8491; resolution</h1>
                <p>
                    {{structure}}
                </p>
            </div>
        </div>
    </div>
</section>

<section class="vertical-spacing-top">
    <div class="grid-container">
        <div class="column-full-width">
            <div class="inner">
                <hr />
                <h2 class="heading-medium vertical-spacing-top-0-5">Publication</h2>    
            </div>
        </div>
        {% set publication = structure.publication %}
        <div class="column-two-thirds">
            <h3 class="heading-small">
                {{publication.citation.title}}
            </h3>
            <div>
                {% for author in publication.citation.authors %}
                    {{author.full_name}}{% if not loop.last %}, {% endif %}
                {% endfor %}
            </div>
            <div>
                <i>{{publication.citation.iso_abbreviation}}</i> ({{publication.citation.year}}), <strong>{{publication.citation.volume}}</strong>, 
                {{publication.citation.pages}} [<a href="{{structure.doi_url}}">{{structure.doi }}</a>] [View on PubMed]  
            </div>
            <br />
            <p>
                {{ publication.abstract }}
            </p>
            <p>Data retrieved on [{{structure.last_updated}}] from PDBe REST API</p>
        </div>
        <div class="column-one-third">
            <p>Other structures from this publication</p>
            {% for associated_structure in structure.associated_structures %}
            <p>
                <strong>{{associated_structure | upper}}</strong>
            </p>
            {% endfor %}
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock %}